<!DOCTYPE html>
<html>
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<header class="w3-container w3-black"><h1>MinecraftMappings Viewer</h1></header>
<body>
<div class="w3-container pad">
<p>This tool creates transitive mappings for various Minecraft versions. (intermediary2yarn, spigot2yarn, mcp2intermediary, etc..)<br>
Original work by <a href="https://github.com/phase/">phase</a>. Updated by me, view on Github: <a href="https://github.com/bukkitfabric/minecraftmappings">BukkitFabric/MinecraftMappings</a></p>

<style>
label {display: inline-block;min-width: 148px;}
form {display: inline-block; padding: 4px;}
input  {min-width:280px;}
select {min-width:280px;}
input, select {padding: 6px;}
.pad {padding-left:64px; padding-top:32px;}
footer {position:absolute; bottom:0; width:100%;}
</style>

<form>
  <label for="type">Choose a type:</label>
  <select name="type" id="type">
    <option value="FD">Field</option>
    <option value="MD">Method</option>
    <option value="CL">Class</option>
  </select>
</form>
<br>
<form>
  <label for="ver">Choose a version:</label>
  <select name="ver" id="ver">
    <option value="1.16.3">1.16.3</option>
    <option value="1.16.2">1.16.2</option>
    <option value="1.16.1">1.16.1</option>
    <option value="1.15.2">1.15.2</option>
    <option value="1.14.4" disabled>1.14.4</option>
    <option value="1.13.2" disabled>1.13.2</option>
    <option value="1.12.2">1.12.2</option>
    <option value="1.11.2" disabled>1.11.2</option>
    <option value="1.10.2" disabled>1.10.2</option>
    <option value="1.12.2" disabled>1.9.4</option>
    <option value="1.8.9" disabled>1.8.9</option>
    <option value="1.8.8" disabled>1.8.8</option>
    <option value="1.7.10" disabled>1.7.10</option>
    <option value="1.7.2" disabled>1.7.2</option>
    <option value="1.6.4" disabled>1.6.4</option>
    <option value="1.5.2" disabled>1.5.2</option>
    <option value="1.4.7" disabled>1.4.7</option>
    <option value="1.3.2" disabled>1.3.2</option>
    <option value="1.2.5" disabled>1.2.5</option>
  </select>
</form>
<br>
<form>
  <label for="map">Mappings:</label>
  <select name="map" id="map">
    <option value="intermediary2yarn">Intermediary &#8594; Yarn</option>
    <option value="obf2intermediary" disabled>Obf &#8594; Intermediary</option>
    <option value="spigot2yarn" disabled>Spigot &#8594; Yarn</option>
  </select>
</form><br>
<form>
  <label for="value">Value to Search</label>
  <input type="text" id="value" name="value" placeholder="field_1234">
</form>

<br><br>
<button onclick="doTest()">Go</button>

<script>
function doTest() {
  var e = document.getElementById("type");
  var type = e.options[e.selectedIndex].value;

  e = document.getElementById("ver");
  var ver = e.options[e.selectedIndex].value;

  e = document.getElementById("map");
  var map = e.options[e.selectedIndex].value;

  e = document.getElementById("value");
  var value = e.value;

  readTextFile("mappings/" + ver + ".json", value, type);
}
function readTextFile(file, value, map) {
    var rawFile = new XMLHttpRequest();
    rawFile.open("GET", file, true);
    rawFile.onreadystatechange = function () {
        if(rawFile.readyState === 4) {
            if(rawFile.status === 200 || rawFile.status == 0) {
                var allText = rawFile.responseText;
                var myobj = JSON.parse(allText);

                if (map === "CL") {
                    var clazz = myobj.classes;
                    for (i = 0; i < clazz.length; i++) {
                        var claz = clazz[i];
                        if (claz.intermediary === value) {
                            document.getElementById("content").innerHTML = "Obf: " + claz.obf + ", Intermediary: " + claz.intermediary + ", Yarn: " + claz.yarn;
                            return;
                        }
                    }
                }

                if (map === "MD") {
                    var meths = myobj.methods;
                    for (i = 0; i < meths.length; i++) {
                        var claz = meths[i];
                        if (null === claz.intermediary)
                            continue;
                        if (claz.intermediary.split(".")[1].intermediary === value) {
                            document.getElementById("content").innerHTML = "Obf: " + meths.obf + ", Intermediary: " + meths.intermediary + ", Yarn: " + meths.yarn;
                            return;
                        }
                    }
                }

                if (map === "FD") {
                    var fiels = myobj.fields;
                    for (i = 0; i < fiels.length; i++) {
                        var claz = fiels[i];
                        if (null === claz.intermediary)
                            continue;
                        if (claz.intermediary.split(".")[1].intermediary === value) {
                            document.getElementById("content").innerHTML = "Obf: " + fiels.obf + ", Intermediary: " + fiels.intermediary + ", Yarn: " + fiels.yarn;
                            return;
                        }
                    }
                }

                document.getElementById("content").innerHTML = "Not found?";
            }
        }
    }
    rawFile.send();
}
</script>
<p id="test"></p>
<p id="content">
&nbsp;
</p>

</div>
</body>
<footer class="w3-container w3-black"><small class="w3-small">Copyright &copy; 2020 <a href="https://javazilla.com">Javazilla.com</a> &nbsp;|&nbsp; View Mapping Data on <a href="https://github.com/bukkitfabric/minecraftmappings">Github</a></small></footer>
</html>
